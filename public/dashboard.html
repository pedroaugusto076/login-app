<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
  <div class="card">
    <h1>Você está logado!</h1>
    <p id="userInfo"></p>
    <button id="logoutBtn">Sair</button>
  </div>
</div>
<script>
async function checkUser(){
  const res = await fetch('/api/dashboard');
  const data = await res.json();
  if(data.error) window.location.href = 'login.html';
  else document.getElementById('userInfo').textContent = `Olá, ${data.user.username}!`;
}
checkUser();

document.getElementById('logoutBtn').addEventListener('click', async () => {
  await fetch('/api/logout');
  window.location.href = 'login.html';
});
</script>
</body>
</html>
